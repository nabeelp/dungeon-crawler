# Leslie — Game Critic Review (2026-02-26T08:01:56Z)

**Agent:** Leslie (Critic)  
**Task:** Full game review and bug audit  
**Status:** COMPLETE

## Summary

Reviewed all 14 source files. Identified **6 critical bugs**, **7 serious design issues**, and **3 minor issues**. Provided prioritized fix list with severity ratings.

## Key Findings

### Critical (MUST FIX)
1. **Double XP / Level-Up on Kill** — `main.js:190-195` + `combat.js:289-296` both trigger on same kill
2. **Save/Load Loses Entity State** — JSON drops statusEffects, tags, xpValue, templateKey, _buffs, item._defKey
3. **ItemSystem.init() Never Called** — Identification maps stay empty, all potions/scrolls broken
4. **ItemSystem.dropLoot() Never Called** — Monsters never drop loot, dead code exists
5. **ItemSystem.tickBuffs() Never Called** — Buffs/debuffs permanent, Strength Potion gives infinite +5 attack
6. **createItem() Loses Custom Properties** — `_defKey` on potions, `fire_dot` on Flamebrand stripped

### Serious (SIGNIFICANTLY HURTS GAMEPLAY)
1. Math.random() breaks determinism in combat/AI
2. Helmet/boots/amulet extremely rare (only 30% bonus roll)
3. Combat phase threshold too tight for ranged attackers
4. Self-targeting abilities blocked when no enemies visible
5. Fireball AoE hits friendlies/minions
6. No inventory cap (UI breaks)
7. Scroll of Teleport can land on walls/monsters

### Minor (LIVABLE)
1. Doors block FOV but are walkable — confusing but functional
2. Score formula rewards slow play (turn count as positive term)
3. No diagonal movement keys (4-directional only)

## Integration Notes

- **Priority order:** (1) Double XP, (2) ItemSystem wiring, (3) createItem fix, (4) save/load, (5) rarity fixes, (6) self-targeting fix, (7) Math.random replacement, (8) combat phase fix
- **Files to fix:** main.js, combat.js, gameState.js, items.js
- **Validation:** All 14 source files reviewed; working systems noted (BSP generation, FOV, A*, module arch, render-on-demand, status effects, equipment mods)

# Orchestration Log — Raj (Items + Loot)

**Timestamp:** 2026-02-25T15:00:00Z  
**Agent:** Raj  
**Mode:** background  
**Status:** Complete  

## Deliverables

✅ Built complete item system (items.js) — 50+ templates
✅ Implemented identification system (per-run randomized mappings)
✅ Built loot tables with rarity scaling (floor 1-10)
✅ Implemented inventory management (pickup, drop, equip, use)
✅ Implemented buff/debuff system with duration ticking
✅ Decision doc: `.squad/decisions/inbox/raj-items-api.md`
✅ All 85 tests passing

## Key Decisions

- Item creation via `GameState.createItem(opts)` (uses Sheldon's factory)
- Consumables (potions/scrolls) start `identified: false`
- Equipment always identified
- Stat mods applied/removed symmetrically on equip/unequip
- Buff/debuff system on `entity._buffs[]`, ticked via `ItemSystem.tickBuffs(entity)`
- Potion/scroll `_defKey` property links to definition
- Loot scaling: quantity (3-5 floor 1 → 6-10 floor 10), rarity (rare/epic/legendary only on floors 8+)

## Integration Points

- Loads after constants, utils, gameState
- Main entry: `ItemSystem.placeItemsOnFloor(floorIndex, rooms, rng)`
- Consumed by: Howard's inventory UI, combat system (buff ticking)
- Uses `Constants.ITEM_TYPES`, `GameState.addMessage()`, `GameState.addGroundItem()`

## Files Modified

- `src/items/items.js` (created)
- `tests/test-items.js` (created)
